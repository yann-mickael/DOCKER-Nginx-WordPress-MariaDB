
DOCKER-COMPOSE_PLATEFORME



ðŸ”„ VÃ©rifier la version de Docker
Docker -v
Docker version compose


ðŸ”„ RedÃ©marrer les services Docker : Retourne dans ton terminal et exÃ©cute la commande suivante pour appliquer les changements :
docker compose up -d â€“build
Signification :
â€¢	docker compose : utilise Docker Compose (nouvelle syntaxe intÃ©grÃ©e Ã  Docker CLI).
â€¢	up : lance les services dÃ©finis dans le fichier docker-compose.yml.
â€¢	-d : exÃ©cute les conteneurs en mode dÃ©tachÃ© (en arriÃ¨re-plan).
â€¢	--build : force la reconstruction des images, mÃªme si elles existent dÃ©jÃ .

ðŸ”„ Nettoyer les conteneurs orphelins
â€¢docker compose down --remove-orphans


ðŸ”„ Lister tous les conteneurs du projet :
# docker compose ps --all



ðŸ”„  RedÃ©marrer les services Docker
AprÃ¨s avoir vÃ©rifiÃ© ou modifiÃ© le fichier docker-compose.yml, redÃ©marrez les services Docker pour appliquer les changements :
# docker compose down
# docker compose up -d


ðŸ”„ Permissions : VÃ©rifiez que les permissions du rÃ©pertoire montÃ© sont correctes. 
Les conteneurs doivent avoir les droits nÃ©cessaires pour lire et Ã©crire dans ce rÃ©pertoire.
# sudo chown -R 33:33 /chemin/vers/votre/dossier/wordpress


ðŸ”„ VÃ©rifier le contenu du volume
Exemple pour vÃ©rifier que le volume contient bien les fichiers de WordPress :
# docker run --rm -v wordpress_data:/data alpine ls /data

ðŸ”„ Localisation des volumes Docker sur Windows
Pour accÃ©der Ã  vos volumes Docker, y compris wordpress_data, suivez ces Ã©tapes :
1.	Ouvrir l'Explorateur de fichiers : Appuyez sur Win + E pour ouvrir l'Explorateur de fichiers.
2.	AccÃ©der au chemin rÃ©seau : Dans la barre d'adresse de l'Explorateur, entrez le chemin suivant :

\\wsl.localhost\docker-desktop\mnt\docker-desktop-disk\data\docker\volumes
 

ðŸ”„ Voir les conteneurs :
AccÃ©der au conteneur WordPress :
# docker exec -it wordpress bash

ðŸ”„ Modifier les permissions :
# chown -R www-data:www-data /var/www/html
 

ðŸ”„ Enregistrer lâ€™historique des commandes CMD dans un fichier texte
cmd
# doskey /history > commandes.txt

ðŸ”„ Supprimer les volumes de donnÃ©es pour tout nettoyer complÃ¨tement :
# docker-compose down --volumes


Arborescence

Projet-Plateforme/
â”œâ”€â”€ .env
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ nginx.conf
â”‚   â””â”€â”€ Conf/
        â””â”€â”€ conf.d
â”‚   â””â”€â”€ Dokerfile
â”‚   â””â”€â”€ defaullt.conf
â”œâ”€â”€ php/
â”‚   â”œâ”€â”€ Dockerfile     
â”‚   â””â”€â”€ www/             
â”œâ”€â”€ www/ wp-config.php
â”‚   â”œâ”€â”€ wp-admin/
â”‚   â”œâ”€â”€ wp-content/
â”‚   â”œâ”€â”€ wp-includes/
â”‚   â”œâ”€â”€ index.php
â”‚   â”œâ”€â”€ wp-config.php
â”‚   â””â”€â”€ â€¦ (autres fichiers WordPress)
â””â”€â”€ (le cas Ã©chÃ©ant)



ðŸ”„ Fichier .env 
MYSQL_ROOT_PASSWORD=Laplateforme  # Mot de passe pour l'utilisateur root MySQL
MYSQL_USER=Laplateforme           # Nom d'utilisateur pour la base de donnÃ©es
MYSQL_PASSWORD=XXXXXXXXXXXX       # Mot de passe de l'utilisateur MySQL
MYSQL_DATABASE=wordpress          # Nom de la base de donnÃ©es Ã  crÃ©er



ðŸ”„les services suivants :
â€¢	nginx : pour servir WordPress et phpMyAdmin.
â€¢	php-fpm : pour exÃ©cuter le code PHP (utilisÃ© par WordPress et phpMyAdmin).
â€¢	MariaDB : la base de donnÃ©es pour WordPress et phpMyAdmin.
â€¢	phpMyAdmin : interface web pour gÃ©rer MariaDB.


